# v0.7.0 Requirements ‚Äî Detailing & Drawings

**Status:** ‚úÖ Approved by CLIENT Agent  
**Date:** 2025-12-11  
**Version Target:** v0.7.0

---

## 1. CLIENT Agent ‚Äî Requirements Specification

### 1.1 Output Format Decision
| Option | Decision |
|--------|----------|
| **DXF (AutoCAD compatible)** | ‚úÖ **SELECTED** |
| SVG (web/PDF) | ‚ùå Not needed |
| ASCII/Text diagram | ‚ùå Too basic |
| Excel-embedded shapes | ‚ùå Not portable |

**Rationale:** DXF is the industry standard for structural drawings. Engineers use AutoCAD or compatible software (BricsCAD, LibreCAD) for detailing. DXF export allows direct use in existing workflows.

### 1.2 Drawing Content Requirements
| Element | Required | Notes |
|---------|----------|-------|
| **Beam Elevation** | ‚úÖ YES | Longitudinal view with dimensions |
| **Reinforcement Layout** | ‚úÖ YES | Main bars (top/bottom), stirrups |
| Section cuts (cross-sections) | ‚ö†Ô∏è Optional | Nice to have for v0.7 |
| Bar Bending Schedule (BBS) | ‚ùå v0.8+ | Separate deliverable |

### 1.3 Level of Detail
| Level | Decision |
|-------|----------|
| Schematic (conceptual) | ‚ùå |
| **Shop Drawing (fabrication-ready)** | ‚úÖ **SELECTED** |

**Implications of Shop Drawing Level:**
- Must show exact bar diameters and counts
- Must show stirrup spacing zones (Start, Mid, End)
- Must include dimension strings
- Must follow IS 456 / SP 34 conventions
- Must include development/lap lengths
- Cover dimensions required

### 1.4 Acceptance Criteria
1. Generate a valid `.dxf` file from `tbl_BeamDesign` data.
2. DXF opens correctly in AutoCAD/LibreCAD.
3. Beam elevation shows:
   - Overall length with dimensions
   - Top and bottom reinforcement
   - Stirrup zones with spacing
4. Reinforcement callouts are readable (e.g., "3-16œÜ").
5. Drawing follows standard conventions (SP 34).

---

## 2. Scope Lock (PM Approved)

### 2.1 IN Scope for v0.7.0
- [x] Single beam elevation drawing
- [x] Main bar layout (top/bottom)
- [x] Stirrup layout with zones
- [x] Dimension strings
- [x] DXF file export
- [x] Basic layer structure (BEAM, REBAR, STIRRUP, DIM, TEXT)

### 2.2 OUT of Scope (Deferred to v0.8+)
- [ ] Section cuts (cross-sections)
- [ ] Bar Bending Schedule (BBS) table
- [ ] Multi-beam layout on single drawing
- [ ] Title block / drawing border
- [ ] 3D visualization
- [ ] PDF export

---

## 3. Technical Constraints

### 3.1 DXF Library
**Options:**
1. **ezdxf** (Python): Mature, well-documented, MIT license.
2. **VBA Native**: Write DXF text format directly (complex but no dependencies).
3. **Python-to-VBA Bridge**: Generate DXF via Python, call from VBA.

**Recommendation:** Use **ezdxf** in Python for DXF generation. VBA can trigger Python script or we provide a standalone Python CLI.

### 3.2 Coordinate System
- Origin: Bottom-left of beam (support point)
- X-axis: Along beam length (mm)
- Y-axis: Vertical (mm)
- Scale: 1:1 (actual mm dimensions)

### 3.3 Layer Structure
| Layer Name | Color | Content |
|------------|-------|---------|
| `BEAM_OUTLINE` | White (7) | Beam concrete outline |
| `REBAR_MAIN` | Red (1) | Longitudinal reinforcement |
| `REBAR_STIRRUP` | Green (3) | Stirrups/links |
| `DIMENSIONS` | Cyan (4) | Dimension lines |
| `TEXT` | Yellow (2) | Annotations, callouts |
| `CENTERLINE` | Magenta (6) | Center/reference lines |

---

## 4. User Stories

### US-01: Generate Beam Detail DXF
**As a** structural engineer,  
**I want to** export a beam detail drawing to DXF,  
**So that** I can use it in AutoCAD for final drafting.

### US-02: View Reinforcement Layout
**As a** site engineer,  
**I want to** see the exact bar arrangement and stirrup spacing,  
**So that** I can verify the fabrication is correct.

### US-03: Check Dimensions
**As a** detailer,  
**I want to** see all critical dimensions,  
**So that** I can prepare the bar bending schedule.

---

## 5. Sign-off

| Role | Status | Date |
|------|--------|------|
| CLIENT | ‚úÖ Approved | 2025-12-11 |
| PM | ‚úÖ Scope Locked | 2025-12-11 |
| RESEARCHER | ‚úÖ Complete | 2025-12-11 |
| DEV | üîÑ Pending | ‚Äî |

